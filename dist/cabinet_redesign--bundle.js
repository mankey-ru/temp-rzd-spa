webpackJsonp([0],[function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var s=this[e];s[2]?t.push("@media "+s[2]+"{"+s[1]+"}"):t.push(s[1])}return t.join("")},t.i=function(e,s){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},i=0;i<this.length;i++){var n=this[i][0];"number"==typeof n&&(a[n]=!0)}for(i=0;i<e.length;i++){var r=e[i];"number"==typeof r[0]&&a[r[0]]||(s&&!r[2]?r[2]=s:s&&(r[2]="("+r[2]+") and ("+s+")"),t.push(r))}},t}},function(t,e){t.exports=function(t,e,s,a){var i,n=t=t||{},r=typeof t.default;"object"!==r&&"function"!==r||(i=t,n=t.default);var o="function"==typeof n?n.options:n;if(e&&(o.render=e.render,o.staticRenderFns=e.staticRenderFns),s&&(o._scopeId=s),a){var d=o.computed||(o.computed={});Object.keys(a).forEach(function(t){var e=a[t];d[t]=function(){return e}})}return{esModule:i,exports:n,options:o}}},function(t,e,s){function a(t){for(var e=0;e<t.length;e++){var s=t[e],a=c[s.id];if(a){a.refs++;for(var i=0;i<a.parts.length;i++)a.parts[i](s.parts[i]);for(;i<s.parts.length;i++)a.parts.push(n(s.parts[i]));a.parts.length>s.parts.length&&(a.parts.length=s.parts.length)}else{for(var r=[],i=0;i<s.parts.length;i++)r.push(n(s.parts[i]));c[s.id]={id:s.id,refs:1,parts:r}}}}function i(){var t=document.createElement("style");return t.type="text/css",_.appendChild(t),t}function n(t){var e,s,a=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(a){if(f)return m;a.parentNode.removeChild(a)}if(p){var n=v++;a=u||(u=i()),e=r.bind(null,a,n,!1),s=r.bind(null,a,n,!0)}else a=i(),e=o.bind(null,a),s=function(){a.parentNode.removeChild(a)};return e(t),function(a){if(a){if(a.css===t.css&&a.media===t.media&&a.sourceMap===t.sourceMap)return;e(t=a)}else s()}}function r(t,e,s,a){var i=s?"":a.css;if(t.styleSheet)t.styleSheet.cssText=g(e,i);else{var n=document.createTextNode(i),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(n,r[e]):t.appendChild(n)}}function o(t,e){var s=e.css,a=e.media,i=e.sourceMap;if(a&&t.setAttribute("media",a),i&&(s+="\n/*# sourceURL="+i.sources[0]+" */",s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t.styleSheet)t.styleSheet.cssText=s;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(s))}}var d="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!d)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var l=s(35),c={},_=d&&(document.head||document.getElementsByTagName("head")[0]),u=null,v=0,f=!1,m=function(){},p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,s){f=s;var i=l(t,e);return a(i),function(e){for(var s=[],n=0;n<i.length;n++){var r=i[n],o=c[r.id];o.refs--,s.push(o)}e?(i=l(t,e),a(i)):i=[];for(var n=0;n<s.length;n++){var o=s[n];if(0===o.refs){for(var d=0;d<o.parts.length;d++)o.parts[d]();delete c[o.id]}}}};var g=function(){var t=[];return function(e,s){return t[e]=s,t.filter(Boolean).join("\n")}}()},,function(t,e,s){"use strict";e.a={methods:{DICT:function(t){return-1!==t.indexOf("/")&&(t=t.split("/")),window.lang(t)},LINK:function(t){return window.PAGEDATA&&window.PAGEDATA.LayerLinks&&window.PAGEDATA.LayerLinks[t]?window.PAGEDATA.LayerLinks:(console.error("Не найдена ссылка window.PAGEDATA.LayerLinks."+t),"")}},filters:{DF_FULL:function(t){if(!t)return"";var e=new Date(t);return e.toLocaleString?e.toLocaleString():void 0},CAPITALIZE:UTIL.capitalizeEachWord,FORMAT_SUM:UTIL.formatSum},components:{dict:{props:{name:{type:String}},data:function(){return{content:""}},created:function(){var t=this.$props.name;-1!==t.indexOf("/")&&(t=t.split("/"));var e=window.lang(t),s=this.IS_DEV?"\x3c!--"+t+"--\x3e":"";e?this.$data.content=s+e:this.IS_DEV&&(this.$data.content="Словарная запись с ключом «"+t+"» не найдена",console.error(this.$data.content))},template:'<span v-html="content"></span>'},ifrmsg:{props:{name:{type:String}},data:function(){return{content:""}},created:function(){var t=this.$props.name,e=window.IFRMSG[t],s=this.IS_DEV?"\x3c!--"+t+"--\x3e":"";e?this.$data.content=s+e:this.IS_DEV&&(this.$data.content="Сообщение ИФР «"+t+"» не найдено в window.IFRMSG",console.error(this.$data.content))},template:'<span v-html="content"></span>'}},computed:{IS_DEV:function(){return window.PAGEDATA&&window.PAGEDATA.showErrors}}}},function(t,e,s){"use strict";var a=s(3),i=s.n(a),n=s(25),r=s.n(n),o=s(4);e.a=function(t){var e=new i.a({el:"#vue-app",mixins:[o.a],components:{devmenu:r.a,"page-component":t},template:'<div><devmenu v-if="IS_DEV"/><page-component/></div>'});window&&window.PAGEDATA&&window.PAGEDATA.showErrors&&(window.VUEI=e)}},,function(t,e,s){s(31);var a=s(1)(s(14),s(27),"data-v-304b9b86",null);t.exports=a.exports},,,function(t,e){t.exports={fake:{domain:"pass2.psi.oooinex.ru",port:":8090",protocol:"http://",get siteUrl(){return this.protocol+this.domain+(this.port||"")}},real:{domain:"pass.psi.oooinex.ru",protocol:"https://",get siteUrl(){return this.protocol+this.domain}},psiIp:"172.22.2.92"}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(15);e.default={name:"AuthHandlerRedesign",mixins:[a.a]}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(10);e.default={name:"DevMenu",computed:{homeUrl:function(){return a.fake.siteUrl},realUrl:function(){return window.location.href.replace(a.fake.siteUrl,a.real.siteUrl)}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(16);e.default={name:"PaymentHandlerRedesign",mixins:[a.a]}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(19),i=s(26),n=s.n(i),r=s(24),o=s.n(r);e.default={name:"CabinetRedesign",components:{"payment-handler":n.a,"auth-handler":o.a},mixins:[a.a]}},function(t,e,s){"use strict";e.a={}},function(t,e,s){"use strict";e.a={props:{jr:{type:Object,default:function(){return{}}},retry:{type:Boolean,default:!1},actor:{type:String}},data:function(){return{curCode:store.local.get("paymethod")||"BANK",bRetry:this.$props.retry,paymentAvailable:!0,LOADER:!1,HUMAN_ERROR:""}},computed:{list:function(){return this.$props.jr.paymentSystems},yandexMoney:function(){return this.$props.jr.yandexMoney},saleOrderId:function(){return this.$props.jr.saleOrderId||UTIL.pageData.orderid||UTIL.pageData.orderId||UTIL.pageData.saleOrderId},totalSum:function(){return this.$props.jr.totalSum},type:function(){return this.$props.jr.type||"TICKET"},
//!НЕ РАБОТАЕТ!
transactionId:function(){return this.$props.jr.transactionId}},methods:{select:function(t){yaCheckRequest&&yaCheckRequest.cancel(),this.$data.curCode=t.code},submit:function(t){var e=this;if(store.local.set("paymethod",e.$data.curCode),"YANDEX"!==e.$data.curCode)e.goPay(t);else{UTIL.log("Проверка возможности оплаты Яндексом");var s="/ticket/services/payment/possibility/check/journey/"+e.saleOrderId+"/"+UTIL.pageData.lang+UTIL.getServiceParams();yaCheckRequest=UTIL.ridQuery(s).fail(function(){UTIL.dialogMessage("Оплата Яндекс.Деньгами невозможна"),e.curCode="BANK"}).done(function(){e.goPay(t)})}},goPay:function(t){var e,s=this;if(s.totalSum)if("YANDEX"===s.$data.curCode)this.$refs.yaform.submit();else{if("BANK"!==s.$data.curCode)throw new Error("Не найден обработчик для кода "+curCode);e=window.UTIL.pageData.LayerLinks.bankAuth||"?layer_id=5734";var a={type:s.type,orderId:s.saleOrderId,actorType:s.$props.actor};t&&(a.transactionId=t),window.UTIL.ridQuery(e,a,s.$data).done(function(t){window.location.href=t.url}).always(function(){s.$parent&&!0===s.$parent.$data.LOADING_NEXT&&(s.$parent.$data.LOADING_NEXT=!1)}).fail(function(t,e){s.$parent&&"Оплата заказа невозможна"===t&&(s.$data.paymentAvailable=!1,s.$parent.$data.paymentAvailable=!1)})}else e="?layer_name=e3-result&zero=1&result=OK&orderId="+s.saleOrderId+UTIL.getServiceParams(),window.location.href=e},getImageSrc:function(t){return"/dbmm/images/61/28054/"+t.id}},mounted:function(){window.UTIL.log("payment-handler mounted"),!0===window.UTIL.pageData.showErrors&&(window.VUEI_paymentHandler=this)}}},function(t,e,s){"use strict";e.a={bind:function(t,e,s){function a(t,e,s){for(var a=e.split("."),i=a.pop(),n=0,r=a.length;n<r;n++)t=t[a[n]];t[i]=s}function i(t){$(document.body).toggleClass("jqui-datepicker-active",t)}var n=window.datePickerLoc({dateFormat:"dd.mm.yy",onClose:function(t){i(!1),a(s.context,e.expression,t)},beforeShow:function(){i(!0)}});$(t).datepicker(n)},update:function(t,e,s){$(t).datepicker("setDate",e.value)}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(5),i=s(7),n=s.n(i);s.i(a.a)(n.a)},function(t,e,s){"use strict";function a(t){var e=this;!0===t?e.form.page++:(e.form.page=1,e.slots=[]);var s=$.extend({},e.form);if("history"in window&&"replaceState"in window.history){var a=$.extend(d,s);!1===e.bPageAfterBank&&(delete a.xmlmsg,delete a.orderId,delete a.paymentSystem,delete a.result),window.history.replaceState(null,null,"?"+$.param(a))}n.LOADING_ORDERS=!0,UTIL.ridQuery(PAGEDATA.LayerLinks.orderList,s,n).done(function(s){function a(t,e){return TDate.parse(t.date0)-TDate.parse(e.date0)}UTIL.log("Ответ на запрос списка заказов",s);var i=s.timestamp.substr(3,2)+"/"+s.timestamp.substr(0,2)+"/"+s.timestamp.substr(6,4)+" "+s.timestamp.substr(11),r=new Date(Date.parse(i));if(e.HUMAN_ERROR=null,s.slots&&!s.slots.length&&-1!=window.location.search.indexOf("tD=1")&&void 0!=window.sessionStorage.mobile_Test&&(s=window.sessionStorage.mobile_Test?JSON.parse(window.sessionStorage.mobile_Test):s,UTIL.log("Восстановлено из Хранилища",s)),void 0===s.slots){var o="Произошла ошибка. Пожалуйста, попробуйте выполнить запрос позже.";!0===window.PAGEDATA.showErrors&&(o+="\n"+JSON.stringify(s,null,2)),e.HUMAN_ERROR=o}else{for(var d=0;d<s.slots.length;d++){var _=s.slots[d];if("ON_AVISO"===_.jstatus&&(l++,UTIL.log("В ответе найдена поездка в статусе ON_AVISO",_)),_.lst.length>1&&_.lst.sort(a),_.refunds&&0!==_.refunds.length){var u=_.refunds[0];_.REFUND_MESSAGE=window.IFRMSG._orderRefundMessage.replace("{{./../../transactionId}}",ordslot.transactionId).replace("{{transferDate}}",u.transferDate).replace("{{amount}}",u.amount)}_.LINK_REFUND_REGISTER="?STRUCTURE_ID=735&layer_id=5963&transaction_id="+_.transactionId,_.defShowTime=s.defShowTime,_.mskTimeSuffix=s.mskTimeSuffix;for(var v=[],f=0;f<_.lst.length;f++){var m=_.lst[f];m.ELREG_IFRMSG="",m.LOADING_STATUSES=!1,m.STATUS=null,m.HIDE=!1,m.LOADER=!1,m.LINK_BLANK="?layer_id=5422&ORDER_ID="+m.N,m.LINK_PDF="/blank/ticket/download/pdf/order/"+m.N,m.LINK_AUTORACK="?STRUCTURE_ID=5235&layer_id=5473&app_order_id="+m.N,"1"!==window.PAGEDATA.BaseParams.UFS_HOTELS||m.arrived||(m.LINK_HOTEL=function(t){var e=t.lst[0],s=t.lst[1];if(e.arrived||!window.IFRMSG.UFS_HOTELS_ORDERS)return"";for(var a=[],i=0;i<e.lst.length;i++)a.push(e.lst[i].birthday);return UTIL.formatStr(window.IFRMSG.UFS_HOTELS_ORDERS,{code1:e.code1,date1:e.date1,time1:e.time1,birthdays:a.join(),bk_date0:s?s.date0:"",bk_time0:s?s.time0:""},["$%","$"]).replace(/http:\/\/pass/gm,window.location.protocol+"//pass")}(_)),m.HUMAN_ERROR="",m.SHOW_REFUNDED_ORDER=!1,m.journeyId=_.id,n.$data.DEBUG&&(m.ORDER_LINK=window.location.href+"&saleOrderId="+_.id),v.push({from:m.parentStation0||m.station0,to:m.parentStation1||m.station1,dir:m.dir});for(var p=0;p<m.lst.length;p++){var g=m.lst[p],i=m.date0.substr(3,2)+"/"+m.date0.substr(0,2)+"/"+m.date0.substr(6,4);g.dateTimeDeparture=new Date(Date.parse(i+" "+m.time0)),g.LINK_BLANK="?layer_id=5422&ORDER_ID="+m.N+"&ticket_id="+g.n,g.goodsTotalCost&&(g.goodsTotalCost,g.LINK_GOODS_LIST="?layer_id=5972&ticket_id="+g.n+"&order_id="+m.N,g.LINK_GOODS_BLANK_PDF="/blank/extendedService/download/pdf/serviceOrder/"+m.N),g.HUMAN_ERROR="",g.STATUS={NAME:g.status?window.lang(["TicketStatus",g.status]):"",CODE:g.status},m.STATUS=!!g.status,g.ORDER_ID=m.N,g.LOADING_STATUS=!1,g.LOADER=!1,g.LOADING_REFUND_TICKET=!1,g.LOADING_REFUND_INSURANCE=!1,g.LINK_PDF="/blank/ticket/download/pdf/order/"+m.N+"/"+window.PAGEDATA.lang,g.LINK_PNG="/blank/ticket/download/png/order/"+m.N+"/"+window.PAGEDATA.lang,g.SHOW_INSURANCES=!1,g.SHOW_REFUND_FOOD=!0,g.SHOW_REFUND_FOOD_MSG=!1,g.extendedServices&&g.extendedServices.length&&g.dateTimeDeparture-r<354e4&&(g.SHOW_REFUND_FOOD=!1,g.SHOW_REFUND_FOOD_MSG=!0),g.insurances[0]&&(g.INSUR=g.insurances[0],g.LINK_INSURANCE="?layer_id=5666&passenger_id="+g.insurances[0].passId,g.INSUR.passId&&(g.LINK_INS_PDF="/blank/insurance/download/pdf/passenger/"+g.INSUR.passId+"/"+window.PAGEDATA.lang)),g.policies[0]&&g.number==g.policies[0].ticketNumber?g.policies[0]&&(g.POLICY=g.policies[0],g.POLICY_DATE=g.policies[0].startDate+" — "+g.policies[0].finishDate,g.POLICY_AREA=e.DMSAREA[g.policies[0].areaId],g.POLICY_STATUS=e.POLICY_STATUSES[g.policies[0].statusId]):g.policies[0]}}var I=v[0].from,S=v[0].dir;if(v.length>1){for(var C=1;C<v.length;C++)v[C].dir!=S&&(I+=" — "+v[C].from,S=v[C].dir);I+=" — "+v[v.length-1].to,_.routeNames=I}!0===t&&e.slots.push(_)}!0!==t&&(e.slots=s.slots),l!==c&&(UTIL.dialogMessage($(".j-on-aviso-popup")),l=c),e.lastPage=s.lastPage,-1==window.location.search.indexOf("tD=1")||window.sessionStorage.mobile_Test||(window.sessionStorage.mobile_Test=JSON.stringify(s))}}).always(function(){e.LOADING_ORDERS=!1})}function i(t){document.querySelector("#download-iframe").setAttribute("src",t)}var n,r=s(4),o=s(17),d=window.PAGEDATA.params,l=0,c=0,_={data:function(){return{form:{date0:d.date0||"",date1:d.date1||"",number:d.number||"",name:d.name||"",mode:d.mode||"",type:d.type,transactionId:d.transactionId,saleOrderId:d.saleOrderId||d.orderId||"",result:d.result},slots:[],LOADING_ORDERS:!1,HUMAN_ERROR:"",DMSAREA:g_dmsArea,POLICY_STATUSES:g_policyStatus,refundMsg:!1,lastPage:!0,DEBUG:PAGEDATA.showErrors,bPageAfterBank:!!d.result,bShowRetryPayment:!1,PAYMENT_RESULT:d.result,foodDetails:{selectedMenuItems:!1,LOADING_REFUND:!1},foodList:[],foodListSelectedItem:"",bAuthFormVisible:!1}},filters:{},computed:{bShowForm:function(){return!1===this.bPageAfterBank},bShowBankResultBtns:function(){return!0===this.bPageAfterBank},journeyReservation:function(){return store.session("Reservation")||store.session("ResPg.result")||store.session("pass16_ResResponse")}},mixins:[r.a],mounted:function(){n=this,this.IS_DEV&&(window["VUEI_"+this.$options.name]=this),this.changeMode("active",!0),n.$data.bPageAfterBank?"OK"===d.result?"YANDEX"===d.paymentSystem?n.bankResult_checkPaymentYandex():n.bankResult_finalizePayment():n.bShowRetryPayment=!0:n.getOrders()},directives:{"jqui-datepicker":o.a},methods:{getOrders:a,gotoCabinet:function(){this.$data.HUMAN_ERROR="",$("html,body").animate({scrollTop:0},300),this.$data.bPageAfterBank=!1,this.$data.form.saleOrderId="",this.$data.PAYMENT_RESULT="",this.getOrders()},retryPayment:function(){this.$refs.paymentHandler.submit()},changeMode:function(t,e){if(this.$data.form.mode!==t){this.$data.form.mode=t;var s="active"===t,a=new Date,i=[UTIL.leftpad(a.getDate()),UTIL.leftpad(a.getMonth()+1),a.getFullYear()].join(".");this.$data.form.date0=s?i:"",this.$data.form.date1=s?"":i,e||this.getOrders()}},getStatusesForSaleOrder:function(t){var e=$(".ui-dialog-content:visible");if(0!==e.length&&e.dialog("close"),"function"==typeof $.scrollTo){var s=$("#hash-sord-"+t.id);$.scrollTo(s,200,{offset:-50})}for(var a=0;a<t.lst.length;a++){var i=t.lst[a];this.getStatuses(i)}},getStatuses:function(t,e){t.LOADING_STATUSES=!0,t.LOADER=!0,t.HUMAN_ERROR=null;var s={ORDER_ID:t.N},a={onIdle:function(e){t._statusRid=e.RID}};UTIL.ridQuery("?layer_id=5417",s,t,a).done(function(s){UTIL.log(s),a.HUMAN_ERROR=null,t._statusRid_timestamp=Date.now();var i=s.timestamp.substr(3,2)+"/"+s.timestamp.substr(0,2)+"/"+s.timestamp.substr(6,4)+" "+s.timestamp.substr(11),n=new Date(Date.parse(i));t.LOADER=!1;for(var r=!1,o=!1,d=s.lst,l=0;l<d.length;l++){for(var c=d[l],_=0;_<t.lst.length;_++){var u=t.lst[_],v=u.dateTimeDeparture-n<354e4;u.n===c.n&&(u.STATUS.NAME=c["name_"+window.PAGEDATA.lang],u.STATUS.CODE=c.status,u.LOADING_STATUS=!1,c.policies&&c.policies.length&&u.POLICY&&c.policies[0].number==u.POLICY.number&&(u.POLICY.statusId=c.policies[0].statusId,u.POLICY_STATUS=g_policyStatus[c.policies[0].statusId])),u.LOADER=!1,v&&(u.LOADING_REFUND_TICKET=v,u.SHOW_REFUND_FOOD=!1)}"REGISTERED"===c.status?(r=!0,v&&(u.LOADING_STATUS=v)):"PAID"===c.status?o=!0:"REFUNDED"===c.status&&(u.status=c.status)}!0===r&&!0===o?t.ELREG_IFRMSG="PST_ELREG_BOTH":!0===r?t.ELREG_IFRMSG="PST_ELREG_ETICKET_A4":!0===o&&(t.ELREG_IFRMSG="PST_ELREG_GET_COUPON"),"function"==typeof e&&e()}).always(function(){t.LOADING_STATUSES=!1})},changeStatus:function(t,e,s){if(!t.LOADING_STATUS||!1!==s){t.LOADING_STATUS=!0,t.LOADER=!0;var a={action:!0===s?"REGISTER":"UNREGISTER",ORDER_ID:e.N,ticket_id:t.n};UTIL.ridQuery("?layer_id=5418",a,t).done(function(t){"OK"===t.result&&n.getStatuses(e)}).always(function(){t.LOADING_STATUS=!1})}},refundTicket:function(t,e,s,a){if(!t.LOADING_REFUND_TICKET){t.LOADING_REFUND_TICKET=!0;var i={action:!0===a?"REFUND":"PREVIEW",ORDER_ID:e.N,ticket_id:t.n};UTIL.ridQuery("?layer_id=5421",i,t).done(function(i){t.HUMAN_ERROR=null,UTIL.log(i);var r=window.lang(["Ticket","The amount due for return: $summa$"]);if("lst"in i&&"sum"in i.lst[0]){for(var o={bMulti:i.lst.length>1,bDisabledCompanion:1===t.disabledTypeId,bYandex:"YANDEX_MONEY"===s.paymentMethod,bDMS:t.POLICY?t.POLICY.number&&40==t.POLICY.statusId:null,bDMS_cost:t.POLICY?t.POLICY.cost:null,bINSUR:t.INSUR?0==t.INSUR.bRefund:null,bINSUR_cost:t.INSUR?t.INSUR.cost:null,ord:e,list:[]},d=[],l=0,c=e.lst.length;l<c;l++){var _=e.lst[l];d[_.id]=_}for(var u=0,v=i.lst.length;u<v;u++){var f=i.lst[u],_=d[f.ticketNum];f=$.extend(_,f),f.summa=f.sum,f.text=UTIL.formatStr(r,{summa:f.sum,time:f.time,date:f.date},["$","$"]),o.list.push(f)}n.$data.refundMsg=o;var m={};m[window.lang("Make refund")]=function(a){n.refundTicket(t,e,s,!0),$(this).dialog("close")},m[window.lang("Cancel")]=function(t){$(this).dialog("close")},n.$nextTick(function(){var t={buttons:m};UTIL.dialogMessage($(".j-refund-popup"),t)})}else n.getStatuses(e);a&&t.INSUR&&n.$set(t.INSUR,"Refunded",1)}).always(function(){t.LOADING_REFUND_TICKET=!1})}},refundInsurance:function(t,e){var s={};s[lang("Make refund")]=function(s){$.ajax({url:"?layer_id=5664",type:"POST",dataType:"json",data:{ORDER_ID:e.N,passengerId:t.INSUR.passId,ticketNumber:t.id,ticket_id:t.n}}).success(function(e){"OK"===e.result&&n.$set(t.INSUR,"Refunded",1)}).error(function(t){UTIL.dialogMessage("В процессе возврата страховки произошла ошибка.<br/>Пожалуйста, повторите попытку позже.")}),$(this).dialog("close")},s[lang("Cancel")]=function(t){$(this).dialog("close")},UTIL.dialogMessage("Осуществить возврат страховки?",{buttons:s})},refundDMS:function(t,e){var s={};s[lang("Make refund")]=function(s){var a={journeyId:e.journeyId,policyNumber:t.POLICY.number};UTIL.ridQuery("?layer_id=5890",a,t,{}).done(function(e){"OK"===e.result&&(t.policies[0].statusId=70,t.POLICY_STATUS=g_policyStatus[t.policies[0].statusId]),"OK"==e.statusText&&(e=JSON.parse(e.responseText),UTIL.log("Ошибка при возврате полиса",e),UTIL.dialogMessage("В процессе возврата страховки произошла ошибка.<br/>Пожалуйста, обновите страницу и повторите попытку позже."))}).always(function(e){t.LOADING_REFUND_TICKET=!1,"OK"==e.statusText&&(UTIL.log("Ошибка при возврате полиса.",e),UTIL.dialogMessage("В процессе возврата страховки произошла ошибка.<br/>Пожалуйста, обновите страницу и повторите попытку позже."))}),$(this).dialog("close")},s[lang("Cancel")]=function(t){$(this).dialog("close")};var a=window.IFRMSG.POLICY_CABINET_REFUND_SUM+"&nbsp;"+t.policies[0].cost+"&nbsp;руб.<br/>"+window.IFRMSG.REFUND_INFO_CABINET+"<br/>Осуществить возврат полиса?";UTIL.dialogMessage(a,{buttons:s})},getBlank_insurance:function(t,e){i(location.origin+"/blank/insurance/download/"+e+"/passenger/"+t.INSUR.passId+"/"+window.PAGEDATA.lang)},getBlank_policy:function(t){i(t.POLICY.link)},showInsurances:function(t){!0===t.SHOW_INSURANCES?t.SHOW_INSURANCES=!1:t.SHOW_INSURANCES=!0},showRefundedOrder:function(t){!0===t.SHOW_REFUNDED_ORDER?t.SHOW_REFUNDED_ORDER=!1:t.SHOW_REFUNDED_ORDER=!0},getBlank_ticket:function(t,e,s){function a(){var a={origin:window.location.origin,format:t,orderId:e.N,lang:window.PAGEDATA.lang,random:1e5*Math.random()|0},n=UTIL.formatStr("{origin}/blank/ticket/download/{format}/order/{orderId}/{lang}?_rnd={random}",a);s&&s.n&&(n+="&ticketId="+s.n),e._statusRid&&(n+="&statusRid="+e._statusRid),i(n)}function r(t){return!t||(o-t)/6e4>5}var o=Date.now(),d=!1;if(s)d=!s.STATUS.CODE||r(e._statusRid_timestamp);else for(var l=0;l<e.lst.length;l++)if(!e.lst[l].STATUS.CODE||r(e._statusRid_timestamp)){d=!0;break}d?n.getStatuses(e,a):a()},getFoodDetails:function(t,e,s){if(this.foodDetails.selectedMenuItems&&this.foodDetails.ticketId===e.n)return this.foodDetails.selectedMenuItems=!1;for(var a=s.foodPattern.split(""),i=s.foodType&&s.foodType.replace(/\//g,"").split(""),n=0;n<a.length;n++)a[n]={foodPattern:a[n],foodCode:i[n]};this.foodDetails.ticketId=e.n,this.foodDetails.selectedMenuItems=s.foodCount},getFoodBlank:function(t,e,s,a){if("pdf"===s){i("/blank/extendedfood/download/pdf/order/"+e.N+"/serviceId/"+a.id+"?ticketId="+t.n)}else if("html"===s){var n=70===a.statusId?"&refund=1":"";return"?STRUCTURE_ID=735&layer_id=5962&tik_id="+t.id+"&ORDER_ID="+e.N+n}},refundFood:function(t,e,s){var a=function(){$(this).dialog("close")},i=this,n=function(a){var n=this;$(a.currentTarget).hide(),i.foodDetails.LOADING_REFUND=!0,UTIL.ridQuery("/ticket/secure/ru?layer_id=5945&action=Return&orderId="+t.N+"&ticketId="+e.n+"&serviceId="+s.id,{},{}).then(function(){i.foodDetails.LOADING_REFUND=!1,s.statusId=70,$(n).dialog("close")},function(t){i.foodDetails.LOADING_REFUND=!1,$(n).find(".jqui-dialog-message").html("При возврате дополнительного питания произошла ошибка: "+t)})};i.foodDetails.LOADING_REFUND=!0,UTIL.ridQuery("/ticket/secure/ru?layer_id=5945&action=Info&orderId="+t.N+"&ticketId="+e.n+"&serviceId="+s.id,{},{}).then(function(t){i.foodDetails.LOADING_REFUND=!1;var s=t.timestamp.substr(3,2)+"/"+t.timestamp.substr(0,2)+"/"+t.timestamp.substr(6,4)+" "+t.timestamp.substr(11),r=new Date(Date.parse(s));if(e.dateTimeDeparture-r<354e4)return e.SHOW_REFUND_FOOD_MSG=!0,void(e.SHOW_REFUND_FOOD=!1);var o=t.response.foodRefunds[0]&&t.response.foodRefunds[0].refundAmount,d={buttons:{}};d.buttons[lang("Make refund")]=n,d.buttons[lang("Cancel")]=a,UTIL.dialogMessage("Сумма к возврату за дополнительное питание: "+o+" руб.",d)},function(t){i.foodDetails.LOADING_REFUND=!1,{}[lang("Ok")]=a,UTIL.dialogMessage("Ошибка при получении информации о возврате: "+t)})},isTicketActionsAvailable:function(t,e){return!e.left&&!!t.STATUS.CODE&&"REFUNDED"!==t.STATUS.CODE},isInsuranceActive:function(t){return t.INSUR&&1!==t.INSUR.Refunded},isPolicyActive:function(t){return t.POLICY&&1!==t.POLICY.Refunded},isPolicyRefundAvailable:function(t,e){return this.isTicketActionsAvailable(t,e)&&t.POLICY_STATUS&&"ISSUED"==t.POLICY_STATUS.code},isInsuranceRefundAvailable:function(t,e){return"1"===window.PAGEDATA.BaseParams.is_insurance_refund&&this.isTicketActionsAvailable(t,e)&&this.isInsuranceActive(t)&&1===t.INSUR.bRefund},prepaidFood_visible:function(t,e){return!(e.left&&!e.foodId)&&t.food},addFood_visible:function(t){var e=!1;if(t.extendedServices&&t.extendedServices.length)for(var s=0;s<t.extendedServices.length;s++)if(t.extendedServices[s]&&1===t.extendedServices[s].typeId){e=!0;break}return t.addFood||e},addFood_getArray:function(t){var e,s=[];if(t.extendedServices&&t.extendedServices.length)for(e=0;e<t.extendedServices.length;e++)t.extendedServices[e]&&1===t.extendedServices[e].typeId&&(30===t.extendedServices[e].statusId?(t.extendedServices[e].isPurchased=!0,t.extendedServices[e].isRefunded=!1):70===t.extendedServices[e].statusId&&(t.extendedServices[e].isPurchased=!1,t.extendedServices[e].isRefunded=!0),t.extendedServices[e].isLast=t.extendedServices.length===e+1,s.push(t.extendedServices[e]));return 0===s.length&&!0===t.addFood&&(s=[{isLast:!0,isFake:!0}]),s},addFood_isBuyPossible:function(t){var e=!1;if(t.extendedServices&&t.extendedServices.length)for(var s=0;s<t.extendedServices.length;s++)if(t.extendedServices[s]&&1===t.extendedServices[s].typeId&&30===t.extendedServices[s].statusId){e=!0;break}return t.addFood&&!e},addFood_showMenuWindow:function(t){t=t||"/catering/public/ru?layer_name=catering-menu",window.open(t,"Menu","_blank, strWindowFeatures, height=400, width=737, scrollbars=1")},buyAdditionals:function(t,e,s,a){var i=$.extend({ticketId:s.n,pass:[$.extend({},s,{shortName:s.name,tariff:s.tariffId})]},s),n=$.extend({orderId:e.N,tickets:[i],type:e.carTypeRu,number2:e.train},e),r={saleOrderId:t.id,orders:[n],paymentSystems:[{id:2,code:"BANK",name:"Банковская карта",tip:"Оплата картами банков."}]};store.session("pass16_ResResponse",r),window.location.href=window.PAGEDATA.LayerLinks.additionals+"&reduced=true#/"+a},changeMeal:function(t,e,s,a){var i=this;UTIL.ridQuery("?layer_id=5713",{ORDER_ID:e.ORDER_ID}).then(function(s){if(s.list&&0===s.list.length)return void UTIL.dialogMessage("К сожалению, выбор типа питания для данного заказа недоступен");i.foodList=s,i.foodList.tikFoodName=e.foodName,i.foodList.curSlotId=a.id,i.foodList.curORDER_ID=t.N,i.foodList.curTicketId=e.n,n.$nextTick(function(){UTIL.dialogMessage($("#j-change-food-popup"),{buttons:{OK:function(){i.setChangedFood(),$(this).dialog("close")}}})})},function(t){UTIL.dialogMessage("Ошибка "+t)})},setChangedFood:function(){var t=this;console.log(this);var e=t.foodListSelectedItem.split("_"),s=e[0],a=e[1];for(var i in t.slots)if(t.slots[i].id===t.foodList.curSlotId){var n={ORDER_ID:t.foodList.curORDER_ID,ticket_id:t.foodList.curTicketId,foodId:a},r=i;UTIL.ridQuery("?layer_id=5718",n).done(function(){t.slots[r].lst[0].lst[0].foodName=s}).fail(function(t,e){UTIL.dialogMessage("Во время сохранения данных произошла ошибка "+e.info||t)})}},bankResult_finalizePayment:function(t){function e(t,e){"OK"!==d.result||"OK"!==t.result||e?s.LOADING_ORDERS=!1:(t.response&&t.response[0]&&t.response[0].saleOrderId&&(s.$data.form.saleOrderId=t.response[0].saleOrderId),s.getOrders())}var s=this,a=t?5726:5752,i={orderId:s.$data.form.saleOrderId};s.$data.form.transactionId&&"SERVICE"===s.$data.form.type&&(a=5954,i.type=s.$data.form.type,i.transactionId=s.$data.form.transactionId);var n="?layer_id="+a;s.LOADING_ORDERS=!0,UTIL.ridQuery(n,i,s.$data).done(function(t){e(t)}).fail(function(t){e(t,!0)})},bankResult_goStart:function(){var t;if("SPECIAL"===PAGEDATA.theme){var e=window.store.session("Steps");t=e&&e.trains?e.trains+"|_PREVENT_FORM_SUBMIT_":"/"}else t="REDESIGN"===PAGEDATA.theme?"?layer_name=e3-route":"/";window.location.href=t},bankResult_checkPaymentYandex:function(){function t(){window.UTIL.dialogMessage("Ошибка запроса статуса платежа Яндекс.Деньги")}var e=this,s="/ticket/services/status/journey/"+e.$data.form.saleOrderId+"/payment/"+window.PAGEDATA.lang,a={};e.$data.form.transactionId&&"SERVICE"===e.$data.form.type&&(a.type=e.$data.form.type,a.transactionId=e.$data.form.transactionId),e.LOADING_ORDERS=!0,UTIL.ridQuery(s,a,e.$data).done(function(s){"Error"===s.result?t():"OK"===s.result&&("PAID_YANDEX"===s.data?e.bankResult_finalizePayment(!0):"ISSUED"===s.data?e.getOrders():e.bankResult_checkPaymentYandex())}).fail(t).always(function(){e.LOADING_ORDERS=!1})},alert:window.UTIL.dialogMessage}};e.a=_},function(t,e,s){e=t.exports=s(0)(),e.push([t.i,".debug-link-order[data-v-304b9b86]{float:right;font-size:1.4em}",""])},function(t,e,s){e=t.exports=s(0)(),e.push([t.i,"",""])},function(t,e,s){e=t.exports=s(0)(),e.push([t.i,".devbar[data-v-9fdb1872]{z-index:777;position:fixed;top:0;right:0;background:#fff;padding:15px 20px;border-radius:0 0 0 14px;box-shadow:-2px 2px 9px 1px #666;line-height:26px}.devbar .glyphicon[data-v-9fdb1872]{cursor:pointer}",""])},function(t,e,s){e=t.exports=s(0)(),e.push([t.i,"",""])},function(t,e,s){s(32);var a=s(1)(s(11),s(28),"data-v-7b983428",null);t.exports=a.exports},function(t,e,s){s(33);var a=s(1)(s(12),s(29),"data-v-9fdb1872",null);t.exports=a.exports},function(t,e,s){s(34);var a=s(1)(s(13),s(30),"data-v-dec60bf8",null);t.exports=a.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("h3",{staticClass:"cab-pageName"},[t.PAYMENT_RESULT?["OK"===t.PAYMENT_RESULT?[s("dict",{attrs:{name:"Ticket/headerPaymentOk"}})]:s("div",{staticClass:"alert alert-danger"},["CANCEL"===t.PAYMENT_RESULT?s("ifrmsg",{attrs:{name:"PSTKT_BANK_CANCEL"}}):t._e(),t._v(" "),"DECLINE"===t.PAYMENT_RESULT?s("ifrmsg",{attrs:{name:"PSTKT_BANK_CANCEL"}}):t._e()],1)]:[t._v("Мои заказы")]],2),t._v(" "),t.bShowForm?[s("ul",{staticClass:"list-inline mode-trigger"},[s("li",[s("a",{staticClass:"link-black link-pseudo color-grey",class:{active:"active"===t.form.mode},on:{click:function(e){t.changeMode("active")}}},[s("dict",{attrs:{name:"CabinetMode_active"}})],1)]),t._v(" "),s("li",[s("a",{staticClass:"link-black link-pseudo color-grey",class:{active:"archive"===t.form.mode},on:{click:function(e){t.changeMode("archive")}}},[s("dict",{attrs:{name:"CabinetMode_archive"}})],1)])]),t._v(" "),s("form",{on:{submit:function(e){e.preventDefault(),t.getOrders(e)}}},[s("div",{staticClass:"cab-form form-group"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-6"},[s("div",{staticClass:"cab-form-headers"},[s("dict",{attrs:{name:"Last name"}})],1)]),t._v(" "),s("div",{staticClass:"col-xs-6"},[s("div",{staticClass:"cab-form-headers"},[s("dict",{attrs:{name:"Train number"}})],1)]),t._v(" "),s("div",{staticClass:"col-xs-12"},[s("div",{staticClass:"cab-form-headers"},[s("dict",{attrs:{name:"Departure Date"}})],1)])]),t._v(" "),s("div",{staticClass:"row form-group"},[s("div",{staticClass:"col-xs-6"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",domProps:{value:t.form.name},on:{input:function(e){e.target.composing||(t.form.name=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"col-xs-5"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.number,expression:"form.number"}],staticClass:"form-control",domProps:{value:t.form.number},on:{input:function(e){e.target.composing||(t.form.number=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"col-xs-4 col-xs-offset-1 cab-form-dates-wrap"},[s("input",{directives:[{name:"jqui-datepicker",rawName:"v-jqui-datepicker",value:t.form.date0,expression:"form.date0"}],staticClass:"form-control",attrs:{placeholder:t.DICT("predlog/ot"),"data-custom-default-value":"true"}})]),t._v(" "),s("div",{staticClass:"col-xs-4"},[s("input",{directives:[{name:"jqui-datepicker",rawName:"v-jqui-datepicker",value:t.form.date1,expression:"form.date1"}],staticClass:"form-control",attrs:{placeholder:t.DICT("predlog/do")}})]),t._v(" "),s("div",{staticClass:"col-xs-3"},[s("button",{staticClass:"btn btn-main-red btn-arrow-right cab-form-btn",attrs:{type:"submit"}},[s("dict",{attrs:{name:"Find"}})],1)])])])])]:t._e(),t._v(" "),s("div",{staticClass:"cab-pageName"}),t._v(" "),s("div",{staticClass:"cab-result-wrap"},[t.HUMAN_ERROR?s("pre",{staticClass:"alert alert-danger"},[t._v(t._s(t.HUMAN_ERROR))]):t._e(),t._v(" "),t._l(t.slots,function(e,a){return s("div",{attrs:{id:"hash-sord-"+e.id}},t._l(e.lst,function(i,n){return s("div",[s("div",{staticClass:"cab-order",class:{"cab-order-allTicketsRefunded":i.STATUS,"cab-order-trainLeft":i.left}},[s("div",{staticClass:"color-grey"},[s("dict",{attrs:{name:"Ticket/transactionId"}}),t._v(": "),s("b",[t._v(t._s(e.transactionId))]),t._v(" "),t.IS_DEV?[s("a",{staticClass:"debug-link-order",attrs:{href:i.ORDER_LINK,title:"Открыть только текущий заказ (ссылка видна только при включённом показе ошибок)"}},[s("i",{staticClass:"glyphicon glyphicon-share-alt"})])]:t._e()],2),t._v(" "),e.REFUND_MESSAGE?s("div",[s("div",{staticClass:"pass-orderList-refund-msg__cont"},[s("div",{staticClass:"refund-msg__item",domProps:{innerHTML:t._s(e.REFUND_MESSAGE)}})])]):t._e(),t._v(" "),s("div",{staticClass:"cab-train-title"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("CAPITALIZE")(i.station0))+" — "+t._s(t._f("CAPITALIZE")(i.station1))+"\n\t\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"cab-order-train-bar"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-6"},[s("div",{staticClass:"cab-label"},[s("dict",{attrs:{name:"Train"}})],1),t._v(" "),s("b",[t._v(t._s(i.train))])]),t._v(" "),s("div",{staticClass:"col-xs-6"},[s("div",{staticClass:"cab-label"},[t._v("Вагон")]),t._v(" "),s("b",[i.bWithoutPlaces?[s("ifrmsg",{attrs:{name:"ANY_VAGON_LASTOCHKA"}})]:[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(i.car)+"\n\t\t\t\t\t\t\t\t\t\t")]],2)]),t._v(" "),s("div",{staticClass:"col-xs-6"},[s("div",{staticClass:"cab-label"},[s("dict",{attrs:{name:"Departure"}})],1),t._v(" "),s("div",{class:"datetime-wrap datetime-wrap_first-"+e.defShowTime},[i.localDate0?s("div",{staticClass:"datetime-local"},[s("span",{staticClass:"datetime-hhmm"},[t._v(t._s(i.localTime0))]),t._v(" "),s("span",{staticClass:"datetime-suffix"},[t._v("("+t._s(i.timeDeltaString0)+")")]),t._v(" "),s("span",{staticClass:"datetime-dmy"},[t._v(t._s(i.localDate0))])]):t._e(),t._v(" "),s("div",{staticClass:"datetime-msk"},[s("span",{staticClass:"datetime-hhmm"},[t._v(t._s(i.time0))]),t._v(" "),i.Msk0?s("span",{staticClass:"datetime-suffix"},[t._v("("+t._s(e.mskTimeSuffix)+")")]):t._e(),t._v(" "),s("span",{staticClass:"datetime-dmy"},[t._v(t._s(i.date0))])])]),t._v(" "),s("span",{staticClass:"color-grey cab-small"},[t._v(t._s(t._f("CAPITALIZE")(i.station0)))])]),t._v(" "),s("div",{staticClass:"col-xs-6"},[s("div",{staticClass:"cab-label"},[s("dict",{attrs:{name:"Arrival"}})],1),t._v(" "),s("div",{class:"datetime-wrap datetime-wrap_first-"+e.defShowTime},[i.localDate1?s("div",{staticClass:"datetime-local"},[s("span",{staticClass:"datetime-hhmm"},[t._v(t._s(i.localTime1))]),t._v(" "),s("span",{staticClass:"datetime-suffix"},[t._v("("+t._s(i.timeDeltaString1)+")")]),t._v(" "),s("span",{staticClass:"datetime-dmy"},[t._v(t._s(i.localDate1))])]):t._e(),t._v(" "),s("div",{staticClass:"datetime-msk"},[s("span",{staticClass:"datetime-hhmm"},[t._v(t._s(i.time1))]),t._v(" "),i.Msk1?s("span",{staticClass:"datetime-suffix"},[t._v("("+t._s(e.mskTimeSuffix)+")")]):t._e(),t._v(" "),s("span",{staticClass:"datetime-dmy"},[t._v(t._s(i.date1))])])]),t._v(" "),s("span",{staticClass:"color-grey cab-small"},[t._v(t._s(t._f("CAPITALIZE")(i.station1)))])])]),t._v(" "),s("div",{staticClass:"row cab-order-money-block"},[s("div",{staticClass:"col-xs-6 col-xs-offset-12"},[i.deferredPayment||"ISSUED"!==e.jstatus?t._e():s("b",[t._v("\n\t\t\t\t\t\t\t\t\t\tОплачено мест: \n\t\t\t\t\t\t\t\t\t\t"),i.bWithoutPlaces?[s("ifrmsg",{attrs:{name:"VAGON_NO_SEATS_LASTOCHKA"}})]:[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(i.nPayed)+"\n\t\t\t\t\t\t\t\t\t\t")]],2)]),t._v(" "),s("div",{staticClass:"col-xs-6"},[t._v("\n\t\t\t\t\t\t\t\t\tОбщая стоимость\n\t\t\t\t\t\t\t\t\t"),s("br"),t._v(" "),s("b",{staticClass:"color-orange"},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(t._f("FORMAT_SUM")(i.cost))+" "),s("dict",{attrs:{name:"RUB"}})],1),t._v(" "),i.hasInsurance?s("div",{staticClass:"color-grey cab-small"},[t._v("Включая страховку")]):t._e()])])]),t._v(" "),t._l(i.lst,function(n){return s("div",{staticClass:"row cab-ticket",class:{"cab-ticket-refunded":"REFUNDED"===n.status}},[n.HUMAN_ERROR?s("pre",{staticClass:"col-xs-24 alert alert-danger"},[t._v(t._s(n.HUMAN_ERROR))]):t._e(),t._v(" "),s("div",{staticClass:"col-xs-12"},[s("div",{staticClass:"cab-fio cab-label"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._f("CAPITALIZE")(n.name))+"\n\t\t\t\t\t\t\t\t")]),t._v(" "),"ISSUED"===e.jstatus?s("div",[t._v("\n\t\t\t\t\t\t\t\t\tСохранить билет:\n\n\t\t\t\t\t\t\t\t\t"),s("a",{staticClass:"cab-blank-link color-orange",attrs:{disabled:i.LOADING_STATUSES},on:{click:function(e){t.getBlank_ticket("pdf",i,n)},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13)&&t._k(e.keyCode,"space",32))return null;t.getBlank_ticket("pdf",i,n)}}},[t._v("PDF")]),t._v(" "),s("span",{staticClass:"color-grey"},[t._v("|")]),t._v(" "),s("a",{staticClass:"cab-blank-link color-orange",attrs:{disabled:i.LOADING_STATUSES},on:{click:function(e){t.getBlank_ticket("png",i,n)},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13)&&t._k(e.keyCode,"space",32))return null;t.getBlank_ticket("png",i,n)}}},[t._v("PNG")]),t._v(" "),s("span",{staticClass:"color-grey"},[t._v("|")]),t._v(" "),s("a",{staticClass:"cab-blank-link color-orange",attrs:{target:"_blank",href:n.LINK_BLANK}},["REFUNDED"===n.STATUS.CODE?s("span",[s("dict",{attrs:{name:"Ticket/Refund coupon"}})],1):i.deferredPayment?s("span",[s("dict",{attrs:{name:"Ticket/Order reservation card"}})],1):s("span",[s("i",{staticClass:"glyphicon glyphicon-print"})])])]):t._e()]),t._v(" "),s("div",{staticClass:"col-xs-6"},[s("div",{staticClass:"row"},[s("div",[s("div",{staticClass:"col-xs-8"},[s("div",{staticClass:"cab-label"},[s("dict",{attrs:{name:"place"}}),t._v(":\n\t\t\t\t\t\t\t\t\t\t\t")],1)]),t._v(" "),s("div",{staticClass:"col-xs-16"},[s("div",{staticClass:"cab-label cab-label-multiline"},[s("b",[i.bWithoutPlaces?[s("ifrmsg",{attrs:{name:"VAGON_NO_SEATS_LASTOCHKA"}})]:n.place?[t._v("\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(n.place)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),s("span",{staticClass:"color-grey cab-small",attrs:{title:n.seatsType}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(n.seatsTypeName)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])]:[s("dict",{attrs:{name:"Ticket/withoutPlace"}})]],2)])])])]),t._v(" "),s("div",{staticClass:"row"},[t._m(0,!0),t._v(" "),s("div",{staticClass:"col-xs-16"},[s("b",[s("div",{staticClass:"cab-label cab-label-multiline"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(n.tariff)+"\n\t\t\t\t\t\t\t\t\t\t\t")])])])]),t._v(" "),n.vtr?s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-24"},[t._v("\n\t\t\t\t\t\t\t\t\t\tВТТ № "+t._s(n.vtr)+"\n\t\t\t\t\t\t\t\t\t")])]):t._e()]),t._v(" "),s("div",{staticClass:"col-xs-6"},[s("div",{staticClass:"cab-label"},[s("dict",{attrs:{name:"Stoimost"}})],1),t._v(" "),s("b",{staticClass:"-color-orange"},[t._v(t._s(t._f("FORMAT_SUM")(n.cost))+" "),s("dict",{attrs:{name:"RUB"}})],1)]),t._v(" "),t.prepaidFood_visible(n,i)||t.addFood_visible(n)?[t._m(1,!0),t._v(" "),s("div",{staticClass:"col-xs-24"},[t.prepaidFood_visible(n,i)?s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-4"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tПредоплаченное:\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"col-xs-20"},[n.foodId?[s("b",[t._v(t._s(n.foodName))]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t  \t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t")]:t._e(),t._v(" "),i.left||"REFUNDED"==n.status?t._e():s("a",{staticClass:"link-dotted",on:{click:function(s){s.preventDefault(),t.changeMeal(i,n,a,e)}}},[i.foodId?[t._v("Сменить")]:[t._v("Выбрать")],t._v(" предоплаченное питание\n\t\t\t\t\t\t\t\t\t\t\t")],2)],2)]):t._e(),t._v(" "),t.addFood_visible(n)?s("div",t._l(t.addFood_getArray(n),function(a){return s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-4"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tДополнительное:\n\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a.isRefunded?s("div",{staticClass:"col-xs-20"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tОформлен возврат.\n\t\t\t\t\t\t\t\t\t\t\t")]):a.isPurchased?[s("div",{staticClass:"col-xs-14"},[s("a",{staticClass:"link-dotted",on:{click:function(e){e.preventDefault(),t.getFoodDetails(i,n,a)}}},[t._l(a.foodPattern.split(""),function(e,a){return[a?[t._v("/")]:t._e(),t._v(" "),"З"===e?s("dict",{attrs:{name:"Breakfast"}}):t._e(),t._v(" "),"О"===e?s("dict",{attrs:{name:"Lunch"}}):t._e(),t._v(" "),"У"===e?s("dict",{attrs:{name:"Dinner"}}):t._e()]})],2),t._v(" \n\t\t\t\t\t\t\t\t\t\t\t\t\t"),s("i",{staticClass:"glyphicon glyphicon-chevron-down"}),t._v(" "),t.foodDetails.selectedMenuItems&&t.foodDetails.ticketId===n.n?[t._l(t.foodDetails.selectedMenuItems,function(e){return s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-6"},["З"===e?s("dict",{attrs:{name:"Breakfast"}}):t._e(),t._v(" "),"О"===e?s("dict",{attrs:{name:"Lunch"}}):t._e(),t._v(" "),"У"===e?s("dict",{attrs:{name:"Dinner"}}):t._e()],1),t._v(" "),s("div",{staticClass:"col-xs-12"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.variant)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"col-xs-6"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.count)+" шт.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])])}),t._v(" "),!n.SHOW_REFUND_FOOD&&n.SHOW_REFUND_FOOD_MSG?s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-24 alert alert-info"},[s("ifrmsg",{attrs:{name:"ADD_FOOD_REFUND_WARNING"}})],1)]):t._e()]:t._e()],2),t._v(" "),s("div",{staticClass:"col-xs-5"},[s("div",{staticClass:"cab-label"},[t._v("Стоимость")]),t._v(" "),s("b",{staticClass:"color-orange"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t._f("FORMAT_SUM")(a.cost))+" "),s("dict",{attrs:{name:"RUB"}})],1)])]:t._e(),t._v(" "),s("div",{staticClass:"col-xs-20"},[a.isFake?t._e():[s("span",{staticClass:"color-grey"},[t._v("Квитанции:")]),t._v(" "),s("a",{staticClass:"cab-blank-link color-orange",on:{click:function(e){t.getFoodBlank(n,i,"pdf",a)}}},[t._v("PDF")]),t._v(" "),s("span",{staticClass:"color-grey"},[t._v("|")]),t._v(" "),s("a",{staticClass:"link-icon link-icon-print cab-blank-link color-orange",attrs:{href:t.getFoodBlank(n,i,"html",a),target:"_blank"}})],t._v(" "),s("div",{staticClass:"cab-order-action-item"},[n.SHOW_REFUND_FOOD&&a.isPurchased?[s("button",{staticClass:"link-dotted",attrs:{disabled:t.foodDetails.LOADING_REFUND},on:{click:function(e){e.preventDefault(),t.refundFood(i,n,a)}}},[s("dict",{attrs:{name:"Return addtional food"}})],1),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t\t\t\t\t\t")]:t._e(),t._v(" "),s("button",{staticClass:"link-dotted",attrs:{href:t.LINK("catering-menu-page")},on:{click:function(e){e.preventDefault(),t.addFood_showMenuWindow()}}},[t._v("Посмотреть меню")]),t._v("  \n\t\t\t\t\t\t\t\t\t\t\t\t\t"),a.isLast&&t.addFood_isBuyPossible(n)?s("button",{staticClass:"link-dotted",on:{click:function(s){s.preventDefault(),t.buyAdditionals(e,i,n,"food")}}},[s("dict",{attrs:{name:"Buy"}})],1):t._e()],2)],2)],2)})):t._e()])]:t._e(),t._v(" "),n.addGoods||n.goodsTotalCost?[t._m(2,!0),t._v(" "),s("div",{staticClass:"col-xs-18"},[n.addGoods&&"REFUNDED"!=n.status?[s("a",{staticClass:"link-dotted",attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.buyAdditionals(e,i,n,"goods")}}},[t._v("Купить товары")]),t._v("\n\t\t\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t\t")]:t._e(),t._v(" "),n.goodsTotalCost?[s("a",{staticClass:"link-dotted",attrs:{href:n.LINK_GOODS_LIST}},[t._v("Оформленные товары")]),t._v(" "),s("a",{staticClass:"cab-blank-link color-orange",attrs:{href:n.LINK_GOODS_BLANK_PDF}},[t._v("PDF")])]:t._e()],2),t._v(" "),n.goodsTotalCost?s("div",{staticClass:"col-xs-6"},[s("b",[s("span",{domProps:{innerHTML:t._s(n.goodsTotalCost)}}),t._v(" "),s("dict",{attrs:{name:"RUB"}})],1)]):t._e()]:t._e(),t._v(" "),n.INSUR?[1==n.INSUR.Refunded?[s("div",{staticClass:"col-xs-24 color-grey dotted-top-delimiter"},[s("ifrmsg",{attrs:{name:"POLICY_CABINET_RETURN_STATUS"}})],1)]:t._e(),t._v(" "),1!=n.INSUR.Refunded?[s("div",{staticClass:"col-xs-24 dotted-top-delimiter"},[s("h5",[s("ifrmsg",{attrs:{name:"POLICY_TITLE_NS_FULL"}})],1)]),t._v(" "),s("div",{staticClass:"col-xs-18"},[s("div",{staticClass:"cab-ticket-insur-wrap"},[t._v("\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(n.INSUR.shortName)+":\t\n\n\t\t\t\t\t\t\t\t\t\t\t"),s("span",{staticClass:"text-nowrap"},[s("a",{staticClass:"cab-blank-link color-orange",on:{click:function(e){t.getBlank_insurance(n,"pdf")},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13)&&t._k(e.keyCode,"space",32))return null;t.getBlank_insurance(n,"pdf")}}},[t._v("PDF")]),t._v(" "),s("span",{staticClass:"color-grey"},[t._v("|")]),t._v(" "),s("a",{staticClass:"cab-blank-link color-orange",attrs:{target:"_blank",href:n.LINK_INSURANCE}},[s("i",{staticClass:"glyphicon glyphicon-print"})]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t\t\t\t\t"),t.isInsuranceRefundAvailable(n,i)?s("a",{staticClass:"link-dotted",on:{click:function(e){t.refundInsurance(n,i)},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13)&&t._k(e.keyCode,"space",32))return null;t.refundInsurance(n,i)}}},[s("dict",{attrs:{name:"Order a refund"}})],1):t._e()])])]),t._v(" "),s("div",{staticClass:"col-xs-6"},[s("b",{staticClass:"-color-orange"},[t._v(t._s(t._f("FORMAT_SUM")(n.INSUR.cost))+" "),s("dict",{attrs:{name:"RUB"}})],1)])]:t._e()]:t._e(),t._v(" "),n.POLICY?s("div",{staticClass:"col-xs-24 dotted-top-delimiter"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-24"},[s("h5",[s("ifrmsg",{attrs:{name:"POLICY_TITLE"}})],1)]),t._v(" "),s("div",{staticClass:"col-xs-18"},[s("ifrmsg",{attrs:{name:"POLICY_COMPANY"}}),t._v(" \n\n\t\t\t\t\t\t\t\t\t\t"),t.isPolicyActive(n)?[s("a",{staticClass:"cab-blank-link color-orange",attrs:{target:"_blank",href:n.POLICY.link}},[t._v("PDF")])]:t._e()],2),t._v(" "),s("div",{staticClass:"col-xs-6"},[s("b",{staticClass:"-color-orange"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(t._f("FORMAT_SUM")(n.POLICY.cost))+" "),s("dict",{attrs:{name:"RUB"}})],1)]),t._v(" "),s("div",{staticClass:"col-xs-24 color-grey"},[s("ifrmsg",{attrs:{name:"POLICY_FORM_TERRITORY"}}),t._v(": \n\t\t\t\t\t\t\t\t\t\t"),s("b",[t._v(t._s(n.POLICY_AREA))]),t._v("\n\t\t\t\t\t\t\t\t\t\t  |  \n\t\t\t\t\t\t\t\t\t\tСрок действия полиса: "),s("b",[t._v(t._s(n.POLICY_DATE))])],1)])]):t._e(),t._v(" "),n.LOADER||i.LOADER||n.STATUS.NAME?s("div",{staticClass:"col-xs-24 dotted-top-delimiter"},[s("div",[n.LOADER||i.LOADER?s("i",{staticClass:"spin--aurora"}):n.STATUS.CODE?s("div",{staticClass:"cab-statusName"},[s("b",[t._v(t._s(n.STATUS.NAME))]),t._v("   \n\t\t\t\t\t\t\t\t\t\t")]):t._e()]),t._v(" "),t.isTicketActionsAvailable(n,i)?s("div",{staticClass:"pass-orderList-ticket-btnWrap row"},[s("div",{staticClass:"col-xs-24 buttons-list cab-order-action-bar color-grey"},[s("div",{directives:[{name:"show",rawName:"v-show",value:"PAID"===n.STATUS.CODE,expression:"tik.STATUS.CODE==='PAID'"}],staticClass:"cab-order-action-item"},[s("button",{staticClass:"link-dotted",attrs:{disabled:n.LOADING_STATUS},on:{click:function(e){t.changeStatus(n,i,!0)}}},[s("dict",{attrs:{name:"Perform an electronic registration"}})],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"REGISTERED"===n.STATUS.CODE,expression:"tik.STATUS.CODE==='REGISTERED'"}],staticClass:"cab-order-action-item"},[s("button",{staticClass:"link-dotted",attrs:{disabled:n.LOADING_STATUS},on:{click:function(e){t.changeStatus(n,i,!1)}}},[s("dict",{attrs:{name:"Cancel electronic registration"}})],1)]),t._v(" "),s("div",{staticClass:"cab-order-action-item"},[n.LOADING_REFUND_TICKET?s("i",{staticClass:"spin"}):s("button",{directives:[{name:"show",rawName:"v-show",value:!1===i.bNonRefundable,expression:"ord.bNonRefundable===false"}],staticClass:"link-dotted",attrs:{disabled:n.LOADING_REFUND_TICKET},on:{click:function(s){t.refundTicket(n,i,e)}}},[s("dict",{attrs:{name:"Order a refund"}})],1)]),t._v(" "),t.isInsuranceRefundAvailable(n,i)?s("div",{staticClass:"cab-order-action-item"},[1!=n.INSUR.Refunded?s("a",{staticClass:"link-dotted",on:{click:function(e){t.refundInsurance(n,i)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tОформить возврат страховки\n\t\t\t\t\t\t\t\t\t\t\t")]):t._e()]):t._e(),t._v(" "),"PAID"===n.STATUS.CODE?s("div",{staticClass:"cab-order-action-item"},[s("a",{staticClass:"link-dotted",attrs:{href:"?STRUCTURE_ID=5243&layer_id=5476&cs_id="+i.parentStation0,target:"_blank"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tПосмотреть кассы\n\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),t.isPolicyRefundAvailable(n,i)?s("div",{staticClass:"cab-order-action-item"},[s("button",{staticClass:"link-dotted",attrs:{disabled:i.LOADING_STATUSES},on:{click:function(e){t.refundDMS(n,i)},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13)&&t._k(e.keyCode,"space",32))return null;t.refundDMS(n,i)}}},[s("ifrmsg",{attrs:{name:"POLICY_CABINET_RETURN_TITLE"}})],1)]):t._e()])]):t._e(),t._v(" "),i.ELREG_IFRMSG?s("div",{staticClass:"t-legend"},[s("div",{staticClass:"t-legend-text"},[t._v("Важно")]),t._v(" "),i.bNonRefundable?s("div",[s("ifrmsg",{attrs:{name:"REFUND_FORBIDDEN_LASTOCHKA"}}),t._v(" "),s("hr")],1):t._e(),t._v(" "),s("ifrmsg",{attrs:{name:i.ELREG_IFRMSG}})],1):t._e()]):t._e(),t._v(" "),s("div",{staticClass:"clearfix"})],2)}),t._v(" "),s("div",{staticClass:"cab-order-action-bar color-grey"},["ISSUED"===e.jstatus?s("div",{staticClass:"row cab-order-action-row"},[s("div",{staticClass:"col-xs-24"},[t._v("\n\t\t\t\t\t\t\t\t\tСохранить билеты:\n\t\t\t\t\t\t\t\t\t"),s("a",{staticClass:"cab-blank-link color-orange",attrs:{disabled:i.LOADING_STATUSES},on:{click:function(e){t.getBlank_ticket("pdf",i)},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13)&&t._k(e.keyCode,"space",32))return null;t.getBlank_ticket("pdf",i)}}},[t._v("PDF")]),t._v(" "),s("span",{staticClass:"color-grey"},[t._v("|")]),t._v(" "),s("a",{staticClass:"link-icon link-icon-print cab-blank-link color-orange",attrs:{target:"_blank",href:i.LINK_BLANK,title:t.DICT("Order form")}})])]):t._e(),t._v(" "),s("div",{staticClass:"row cab-order-action-row"},[s("div",{staticClass:"col-xs-24"},[i.left?s("i",[t._v("Поезд ушёл")]):t._e(),t._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:!i.left&&!i.LOADING_STATUSES,expression:"!ord.left && !ord.LOADING_STATUSES"}],staticClass:"link-icon-refresh",attrs:{title:t.DICT("Ticket/Request for ticket status"),disabled:i.LOADING_STATUSES},on:{click:function(e){t.getStatuses(i)}}},[s("span",{staticClass:"link-dotted"},[t._v("Обновить статус заказа")])])])]),t._v(" "),s("div",{staticClass:"row cab-order-action-row"},[s("div",{staticClass:"col-xs-12"},[i.autoCarrier?s("div",{staticClass:"cab-order-action-item"},[s("a",{attrs:{href:i.LINK_AUTORACK,target:"_blank"}},[s("xsl:attribute",{attrs:{name:"title"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tДля данного поезда вы можете оформить заявку на перевозку транспортного средства (автомобиль)\n\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),s("b",[i.autoOrder?s("span",[t._v("Просмотр заявки на перевозку ТС")]):s("span",[t._v("Заказать перевозку автомобиля")])])],1)]):t._e(),t._v(" "),i.LINK_HOTEL?s("div",{staticClass:"cab-order-action-item"},[s("div",{staticClass:"cab-hotels-block",domProps:{innerHTML:t._s(i.LINK_HOTEL)}})]):t._e()]),t._v(" "),!i.left&&i.avisoTimer?s("div",{staticClass:"col-xs-12"},[s("div",{staticClass:"aviso-timer"},[t._m(3,!0),t._v("\n\t\t\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t\t\t"),s("span",{staticClass:"aviso-timer__timer"},[t._v(t._s(i.avisoTimer)+" мин.")])])]):t._e()])]),t._v(" "),i.HUMAN_ERROR?s("pre",{staticClass:"alert alert-danger"},[t._v(t._s(i.HUMAN_ERROR))]):t._e()],2)])}))}),t._v(" "),s("div",{staticClass:"text-center"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.LOADING_ORDERS,expression:"LOADING_ORDERS===false"}],staticClass:"cab-load-more-wrap"},[s("a",{directives:[{name:"show",rawName:"v-show",value:!t.lastPage,expression:"!lastPage"}],staticClass:"btn btn-main-gray",on:{click:function(e){e.preventDefault(),t.getOrders(!0)}}},[t._v("\n\t\t\t\t\t\tЗагрузить ещё\n\t\t\t\t\t")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.slots.length&&!0===t.bShowForm&&!t.HUMAN_ERROR,expression:"slots.length===0 && bShowForm === true && !HUMAN_ERROR"}],staticClass:"alert alert-err alert-border-ext alert-square alert-err-back"},[s("ifrmsg",{attrs:{name:"PSTKT_CABINET_MSG_EMPTY_SLOTS"}})],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!0===t.LOADING_ORDERS,expression:"LOADING_ORDERS===true"}],staticClass:"spin--aurora"})]),t._v(" "),t.bShowBankResultBtns?s("div",[t.bShowRetryPayment?s("payment-handler",{ref:"paymentHandler",attrs:{actor:"desktop_2016",jr:t.journeyReservation}}):t._e(),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-8"},[t.bShowRetryPayment?s("div",[s("a",{staticClass:"btn btn-main-red",on:{click:t.retryPayment}},[t._v("Попытаться оплатить ещё раз")]),t._v(" "),t.LOADING_ORDERS?s("i",{staticClass:"spin spin-xs"}):t._e()]):t._e()]),t._v(" "),s("div",{staticClass:"col-md-16 text-right"},[s("a",{staticClass:"btn btn-main-gray",attrs:{href:t.LINK("route-2012")},on:{click:function(e){e.preventDefault(),t.bankResult_goStart(e)}}},[t._v("\n\t\t\t\t\t\t\tНачать покупку с начала ")]),t._v("  \n\t\t\t\t\t\t"),s("a",{staticClass:"btn btn-main-red",attrs:{href:t.LINK("cabinet-2012")},on:{click:function(e){e.preventDefault(),t.gotoCabinet(e)}}},[t._v('Перейти в "Мои заказы"')])])])],1):t._e(),t._v(" "),s("div",{staticClass:"hidden"},[s("div",{staticClass:"j-on-aviso-popup"},[s("ifrmsg",{attrs:{name:"PST_WAIT_TRIP_STATUS_REDESIGN2016"}}),t._v(" "),t._l(t.slots,function(e,a){return s("div",{attrs:{id:"hash-sord-"+e.id}},["ON_AVISO"===e.jstatus?s("div",[s("a",{staticClass:"link-dotted",on:{click:function(s){t.getStatusesForSaleOrder(e)}}},[s("dict",{attrs:{name:"Ticket/transactionId"}}),t._v(" "+t._s(e.transactionId)+"\n\t\t\t\t\t\t\t")],1)]):t._e()])})],2),t._v(" "),s("div",{attrs:{id:"j-change-food-popup"}},[s("div",{staticClass:"j-mealList food-selector"},[s("h1",[s("dict",{attrs:{name:"Selecting the type of food"}})],1),t._v(" "),s("div",{staticStyle:{background:"#eee",padding:"1em","margin-bottom":"1em"}},[s("div",[s("p",[s("b",[s("dict",{attrs:{name:"Service expiration moment"}})],1)]),t._v(" "),s("ifrmsg",{attrs:{name:"PSTKT_MSG_FOOD_PRELIM"}})],1)]),t._v(" "),s("b",[s("dict",{attrs:{name:"FoodService/Select food type"}})],1),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"j-list"},t._l(t.foodList.list,function(e,a){return s("div",{staticClass:"j-food-list-item food-selector__item"},[s("div",{staticClass:"j-header food-selector__item-head"},[s("label",{staticStyle:{display:"block"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.foodListSelectedItem,expression:"foodListSelectedItem"}],attrs:{type:"radio",name:"food-type",id:e.id},domProps:{value:e.name+"_"+e.id,checked:e.name==t.foodList.tikFoodName,checked:t._q(t.foodListSelectedItem,e.name+"_"+e.id)},on:{__c:function(s){t.foodListSelectedItem=e.name+"_"+e.id}}}),t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t"),s("div",{staticClass:"food-selector__toggler-down",staticStyle:{float:"right"}},[t._v("▼")]),t._v(" "),s("div",{staticClass:"food-selector__toggler-up",staticStyle:{float:"right"}},[t._v("▲")])])]),t._v(" "),s("div",{staticClass:"j-descr food-selector__item-descr"},[s("div",{staticClass:"message-box"},[e.shortDescr?s("div",{staticClass:"food-selector__item-descr-short"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.shortDescr)+"\n\t\t\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),s("div",[e.hasImage?s("div",{staticStyle:{float:"left",width:"270px"}},[s("img",{staticStyle:{"max-width":"250px"}})]):t._e(),t._v(" "),e.descr?s("div",{staticStyle:{float:"left",width:"300px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.descr)+"\n\t\t\t\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),s("div",{staticStyle:{clear:"both"}})])])])])}))])]),t._v(" "),t.refundMsg?s("div",{staticClass:"j-refund-popup"},[t.refundMsg.bMulti?s("p",[t.refundMsg.bDisabledCompanion?s("span",[s("ifrmsg",{attrs:{name:"DPEOPLE_TICKET_SIMULTANEOUS_RETURN"}})],1):t._e(),t._v(" "),t.refundMsg.bDisabledCompanion?t._e():s("dict",{attrs:{name:"Only the simultaneous return of several tickets at once is possible!"}})],1):t._e(),t._v(" "),t._l(t.refundMsg.list,function(e){return s("div",{staticClass:"form-group"},[s("dict",{attrs:{name:"Departure"}}),t._v(" "+t._s(t.refundMsg.ord.date0)+" "+t._s(t.refundMsg.ord.time0)+", "),s("dict",{attrs:{name:"Train"}}),t._v(" "+t._s(t.refundMsg.ord.train)+", "),s("dict",{attrs:{name:"Ticket/Car"}}),t._v(t._s(t.refundMsg.ord.car)+", "),s("dict",{attrs:{name:"place"}}),t._v(" "+t._s(e.place)+", "+t._s(e.name)+"\n\n\t\t\t\t\t\t"),s("div",{domProps:{innerHTML:t._s(e.message)}}),t._v(" "),s("br")],1)}),t._v(" "),t.refundMsg.bINSUR?s("div",{staticClass:"form-group"},[s("span",[s("b",[s("ifrmsg",{attrs:{name:"INSURANCE_REFUND_SUM"}}),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.refundMsg.bINSUR_cost)}}),t._v(" руб.")],1)])]):t._e(),t._v(" "),t.refundMsg.bDMS?s("div",{staticClass:"form-group"},[s("span",[s("b",[s("ifrmsg",{attrs:{name:"POLICY_CABINET_REFUND_SUM"}}),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.refundMsg.bDMS_cost)}}),t._v(" руб.")],1)])]):t._e(),t._v(" "),s("div",{staticClass:"form-group"},[s("ifrmsg",{attrs:{name:"REFUND_INFO_CABINET"}})],1),t._v(" "),t.refundMsg.bYandex?s("div",[s("ifrmsg",{attrs:{name:"REFUND_RULES_YANDEX_MONEY"}})],1):t._e(),t._v(" "),t.refundMsg.bYandex?t._e():s("div",[s("ifrmsg",{attrs:{name:"REFUND_RULES_BANK"}})],1)],2):t._e()])],2)],2)])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-xs-8"},[s("div",{staticClass:"cab-label"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\tТариф:\n\t\t\t\t\t\t\t\t\t\t")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-xs-24 dotted-top-delimiter"},[s("h5",[t._v("\n\t\t\t\t\t\t\t\t\t\tПитание\n\t\t\t\t\t\t\t\t\t")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-xs-24 dotted-top-delimiter"},[s("h5",[t._v("Товары")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"aviso-timer__text"},[s("span",{staticClass:"glyphicon glyphicon-time"}),t._v(" Заказ подтверждается")])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"devbar"},[s("a",{attrs:{href:t.homeUrl}},[s("i",{staticClass:"glyphicon glyphicon-home"})]),t._v("  \n\t\t"),s("a",{attrs:{href:t.realUrl}},[s("i",{staticClass:"glyphicon glyphicon-new-window",attrs:{title:"Перейти на реальную (непроксированную) страницу. Не забудь сбилдить изменения"}})])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.paymentAvailable?[s("div",{staticClass:"payment-systems row"},t._l(t.list,function(e){return s("div",{staticClass:"col-xs-8 payment-systems__item",class:{selected:t.curCode===e.code},attrs:{title:e.tip},on:{click:function(s){t.select(e)}}},[s("div",{staticClass:"payment-systems__item-cont"},[s("label",[s("span",{staticClass:"glyphicon glyphicon-check pseudoradio__checked"}),s("span",{staticClass:"glyphicon glyphicon-unchecked pseudoradio"}),s("img",{staticClass:"payment-systems__logo",attrs:{src:"/dbmm/images/61/28054/"+e.id}})])])])})),t._v(" "),t.yandexMoney?s("form",{ref:"yaform",attrs:{action:t.yandexMoney.url||"https://money.yandex.ru/eshop.xml",method:"post"}},t._l(t.yandexMoney,function(e,a){return"url"!==a?s("input",{attrs:{name:a,type:"hidden"},domProps:{value:e}}):t._e()})):t._e()]:t._e(),t._v(" "),t.HUMAN_ERROR?s("pre",{staticClass:"alert alert-danger"},[t._v(t._s(t.HUMAN_ERROR))]):t._e()],2)},staticRenderFns:[]}},function(t,e,s){var a=s(20);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s(2)("528ccf4d",a,!0)},function(t,e,s){var a=s(21);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s(2)("60d06051",a,!0)},function(t,e,s){var a=s(22);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s(2)("152fd8b0",a,!0)},function(t,e,s){var a=s(23);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s(2)("2dab3828",a,!0)},function(t,e){t.exports=function(t,e){for(var s=[],a={},i=0;i<e.length;i++){var n=e[i],r=n[0],o=n[1],d=n[2],l=n[3],c={id:t+":"+i,css:o,media:d,sourceMap:l};a[r]?a[r].parts.push(c):s.push(a[r]={id:r,parts:[c]})}return s}}],[18]);
//# sourceMappingURL=cabinet_redesign--bundle.js.map